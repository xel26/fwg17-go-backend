# build image
docker build -t nanda2636/go-backend-coffee-shop .

# membuat volume
docker volume create dataCoffeeShop

# membuat container postgre
docker container create --name coffeeShop -e POSTGRES_PASSWORD=1 -p 5444:5432 --mount "type=volume,source=dataCoffeeShop,destination=/var/lib/postgresql/data" postgres

# membuat container golang
docker container create -v .:/app -w /app -p 127.0.0.1:8080:8080 -e APP_SECRET=57838489hgh#$%$#% -e DB_PASSWORD=1 coffee-shop-backend-golang:1.0.0

# membuat network
docker network create coffee_shop_networking


# menjalankan compose
docker compose up -d
docker compose up -d --build



# jalankan postgre di server
docker run -d --name db-coffee-shop -e POSTGRES_PASSWORD=1 --mount "type=volume,source=dataCoffeeShop,destination=/var/lib/postgresql/data" -h 143.110.156.215 -p 5444:5432 postgres

# jalankan image aplikasi backend di server
1. buat repository di docker hub
2. build image
3. buat tag jika nama image berbeda dengan nama repo : docker tag nanda2636/coffee-shop-backend-golang:1.0.0 nanda2636/go-backend-coffee-shop
4. push image ke docker hub : docker push nanda2636/go-backend-coffee-shop:1.0.0
5. pull image di server : docker pull nanda2636/go-backend-coffee-shop:latest
6. running image di server : docker run -d --name backend-coffee-shop-golang -e APP_SECRET=57838489hgh#$%$#% -h 143.110.156.215 -p :8383:8080 nanda2636/go-backend-coffee-shop:1.0.0